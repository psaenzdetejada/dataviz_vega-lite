{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",

  "config": {
    "view": {
      "stroke": null
    },
    "legend": {
      "symbolOpacity": 1,
      "orient": "bottom-right" ,
      "direction": "horizontal"
    },
    "locale": {"number": {"currency": ["", "\u00a0€"], "decimal": ".", "grouping": [3], "thousands": ","}}
  },

  "description": "Info from https://ine.es/daco/daco42/prechote/cth1123.pdf",

  "width": 500,
  "height": 500,

  "title": {
    "text": "¿Cuál es la tarifa media diaria por habitación ocupada según la categoría de hotel?",
    "anchor": "start",
    "fontSize": 16,
    "subtitle": "Evolución entre noviembre de 2022 y noviembre de 2023",
    "subtitleFontStyle": "italic",
    "subtitleFontSize": 12,
    "subtitlePadding": 6,
    "dy": -10
  },

  "data": {
    "values": [
      {"Tipo": "5 estrellas de oro", "Fecha": "2023-11-01", "Ingreso medio por habitación disponible": 151.5, "Orden": 1},
      {"Tipo": "4 estrellas de oro", "Fecha": "2023-11-01", "Ingreso medio por habitación disponible": 80.2, "Orden": 2},
      {"Tipo": "3 estrellas de oro", "Fecha": "2023-11-01", "Ingreso medio por habitación disponible": 54.2, "Orden": 3},
      {"Tipo": "2 estrellas de oro", "Fecha": "2023-11-01", "Ingreso medio por habitación disponible": 32.3, "Orden": 4},
      {"Tipo": "1 estrella de oro", "Fecha": "2023-11-01", "Ingreso medio por habitación disponible": 33.0, "Orden": 5},
      {"Tipo": "3 y 2 de plata", "Fecha": "2023-11-01", "Ingreso medio por habitación disponible": 26.6, "Orden": 6},
      {"Tipo": "1 de plata", "Fecha": "2023-11-01", "Ingreso medio por habitación disponible": 21.0, "Orden": 7},
      {"Tipo": "5 estrellas de oro", "Fecha": "2022-11-01", "Ingreso medio por habitación disponible": 135.4, "Orden": 1},
      {"Tipo": "4 estrellas de oro", "Fecha": "2022-11-01", "Ingreso medio por habitación disponible": 69.5, "Orden": 2},
      {"Tipo": "3 estrellas de oro", "Fecha": "2022-11-01", "Ingreso medio por habitación disponible": 45.9, "Orden": 3},
      {"Tipo": "2 estrellas de oro", "Fecha": "2022-11-01", "Ingreso medio por habitación disponible": 30.1, "Orden": 4},
      {"Tipo": "1 estrella de oro", "Fecha": "2022-11-01", "Ingreso medio por habitación disponible": 26.4, "Orden": 5},
      {"Tipo": "3 y 2 de plata", "Fecha": "2022-11-01", "Ingreso medio por habitación disponible": 22.6, "Orden": 6},
      {"Tipo": "1 de plata", "Fecha": "2022-11-01", "Ingreso medio por habitación disponible": 18.1, "Orden": 7}
    ]
  },

  "encoding": {
    "x": {
      "field": "Ingreso medio por habitación disponible", 
      "type": "quantitative",
      "axis": {
        "domain": true,
        "grid": false
      }
    },
    "y": {
      "field": "Tipo", 
      "type": "nominal", 
      "sort": {
        "field": "Orden", 
        "op": "min", 
        "order": "ascending" 
      },
      "axis": {
        "ticks": false,
        "title": null
      }
    },
    "color": {
      "type": "nominal",
      "scale": {"domain": ["2023", "2022"], "range": ["blue", "grey"]}
    }
  },

  "layer": [
    {"mark": {
      "type": "bar",
      "height": {"band": 0.7},
      "opacity": 0.5
    },
    "transform": [{"filter": {"field": "Fecha", "equal": "2022-11-01"}}],
    "encoding": {"color": {"datum": "2022"}}
    },
    {"mark": {
      "type": "text",
      "align": "right",
      "dx": -5,
      "dy": -30,
      "fontSize": 9
    },
    "transform": [{"filter": {"field": "Fecha", "equal": "2022-11-01"}}],
    "encoding": {
      "color": {"datum": "2022"},
      "text": {"field": "Ingreso medio por habitación disponible", "format": "$.1f"}
    }
    },

    {"mark": {
      "type": "bar",
      "height": {"band": 0.4}
    },
    "transform": [{"filter": {"field": "Fecha", "equal": "2023-11-01"}}],
    "encoding": {"color": {"datum": "2023"}}
    },
    {"mark": {
      "type": "text",
      "align": "left",
      "dx": 5,
      "fontSize": 12
    },
    "transform": [{"filter": {"field": "Fecha", "equal": "2023-11-01"}}],
    "encoding": {
      "color": {"datum": "2023"},
      "text": {"field": "Ingreso medio por habitación disponible", "format": "$.1f"}
    }
    }
  ]

}
